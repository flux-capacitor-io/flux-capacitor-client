<!DOCTYPE HTML>
<html lang>
<head>
<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<!-- Generated by javadoc (21) on Mon Jun 30 14:27:54 UTC 2025 -->
<title>IndexUtils (Flux Capacitor Client 0.1200.2 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-06-30">
<meta name="description" content="declaration: package: io.fluxcapacitor.javaclient.tracking, class: IndexUtils">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/IndexUtils.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.fluxcapacitor.javaclient.tracking</a></div>
<h1 title="Class IndexUtils" class="title">Class IndexUtils</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.fluxcapacitor.javaclient.tracking.IndexUtils</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">IndexUtils</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Use 48 bits of the current time in milliseconds since epoch as the base of the index. The remaining 16 bits (65k) are
 used to increment the index if messages are written in the same ms as the last batch.
 <p>
 The index is only able to store 2^47 - 1 ms of time since epoch, i.e. about 4,500 years.
 <p>
 Uses <a href="../FluxCapacitor.html#currentClock()"><code>FluxCapacitor.currentClock()</code></a> to get the index corresponding to the current timestamp of Flux Capacitor's
 internal clock.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">IndexUtils</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#indexForCurrentTime()" class="member-name-link">indexForCurrentTime</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Calculates an index based on the current timestamp from Flux Capacitor's internal clock.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#indexFromMillis(long)" class="member-name-link">indexFromMillis</a><wbr>(long&nbsp;millisSinceEpoch)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Derives an index value from the given timestamp in milliseconds since the epoch by shifting it 16 bits to the
 left.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#indexFromTimestamp(java.time.Instant)" class="member-name-link">indexFromTimestamp</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;timestamp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes an index based on the provided timestamp.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#maxIndexFromMillis(long)" class="member-name-link">maxIndexFromMillis</a><wbr>(long&nbsp;millisSinceEpoch)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Computes the maximum possible index for the given timestamp in milliseconds since the epoch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#millisFromIndex(long)" class="member-name-link">millisFromIndex</a><wbr>(long&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Extracts the millisecond component from the given index value.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#nextIndex(java.lang.Long)" class="member-name-link">nextIndex</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;lastIndex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Generates the next unique index based on the current time or the last provided index.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#offsetFromIndex(long)" class="member-name-link">offsetFromIndex</a><wbr>(long&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Calculates the offset from the given index by extracting the least significant 16 bits.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#timestampFromIndex(long)" class="member-name-link">timestampFromIndex</a><wbr>(long&nbsp;index)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Converts the given index to a timestamp.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>IndexUtils</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">IndexUtils</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="millisFromIndex(long)">
<h3>millisFromIndex</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">millisFromIndex</span><wbr><span class="parameters">(long&nbsp;index)</span></div>
<div class="block">Extracts the millisecond component from the given index value.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>index</code> - The input index value, where the higher 48 bits represent the milliseconds since the epoch, and the
              lower 16 bits are used for incrementing within the same millisecond.</dd>
<dt>Returns:</dt>
<dd>The number of milliseconds since the epoch, derived from the given index.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="timestampFromIndex(long)">
<h3>timestampFromIndex</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a></span>&nbsp;<span class="element-name">timestampFromIndex</span><wbr><span class="parameters">(long&nbsp;index)</span></div>
<div class="block">Converts the given index to a timestamp.
 <p>
 The method interprets the index as a value where the upper 48 bits represent milliseconds since the epoch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>index</code> - the index to convert, where the upper 48 bits represent milliseconds since epoch</dd>
<dt>Returns:</dt>
<dd>an <code>Instant</code> representing the timestamp corresponding to the provided index</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="indexFromTimestamp(java.time.Instant)">
<h3>indexFromTimestamp</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">indexFromTimestamp</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html" title="class or interface in java.time" class="external-link">Instant</a>&nbsp;timestamp)</span></div>
<div class="block">Computes an index based on the provided timestamp. The index is generated by converting the timestamp to
 milliseconds since the Unix epoch and shifting it to allocate 48 bits for storing the timestamp with additional
 16 bits reserved for increments within the same millisecond.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timestamp</code> - the Instant object representing a specific timestamp</dd>
<dt>Returns:</dt>
<dd>the computed index as a long value, based on the provided timestamp</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="indexFromMillis(long)">
<h3>indexFromMillis</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">indexFromMillis</span><wbr><span class="parameters">(long&nbsp;millisSinceEpoch)</span></div>
<div class="block">Derives an index value from the given timestamp in milliseconds since the epoch by shifting it 16 bits to the
 left. This method is used for generating a unique index value with additional room for handling increments within
 the same millisecond.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>millisSinceEpoch</code> - the timestamp in milliseconds since the epoch</dd>
<dt>Returns:</dt>
<dd>the computed index value derived from the given timestamp</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maxIndexFromMillis(long)">
<h3>maxIndexFromMillis</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">maxIndexFromMillis</span><wbr><span class="parameters">(long&nbsp;millisSinceEpoch)</span></div>
<div class="block">Computes the maximum possible index for the given timestamp in milliseconds since the epoch.
 <p>
 The index is calculated by shifting the given milliseconds since epoch by 16 bits to the left and subsequently
 adding 65,535 to determine the upper limit for that millisecond.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>millisSinceEpoch</code> - the time in milliseconds since the epoch (January 1, 1970, 00:00:00 GMT)</dd>
<dt>Returns:</dt>
<dd>the maximum index corresponding to the provided time in the Flux Capacitor index space</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="offsetFromIndex(long)">
<h3>offsetFromIndex</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">offsetFromIndex</span><wbr><span class="parameters">(long&nbsp;index)</span></div>
<div class="block">Calculates the offset from the given index by extracting the least significant 16 bits.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>index</code> - the index from which the offset will be derived, typically a value combining time-based and
              incremental components</dd>
<dt>Returns:</dt>
<dd>the offset, which is an integer in the range 0 to 65,535</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="indexForCurrentTime()">
<h3>indexForCurrentTime</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">indexForCurrentTime</span>()</div>
<div class="block">Calculates an index based on the current timestamp from Flux Capacitor's internal clock. The method uses the
 current time in milliseconds since the epoch, shifted left by 16 bits.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a 64-bit long value representing the calculated index. The upper 48 bits represent the current time in
 milliseconds since the epoch, and the lower 16 bits are reserved for potential incrementation within the same
 millisecond.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="nextIndex(java.lang.Long)">
<h3>nextIndex</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">nextIndex</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;lastIndex)</span></div>
<div class="block">Generates the next unique index based on the current time or the last provided index.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>lastIndex</code> - The last index that was generated. Can be null. If null, the method generates an index based on
                  the current time.</dd>
<dt>Returns:</dt>
<dd>The next index, which is either based on the current time or incremented from the provided last index.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025 <a href="https://github.com/flux-capacitor-io/flux-capacitor-client">Flux Capacitor</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
