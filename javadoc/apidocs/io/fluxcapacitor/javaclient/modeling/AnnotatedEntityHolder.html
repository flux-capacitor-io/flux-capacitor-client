<!DOCTYPE HTML>
<html lang>
<head>
<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<!-- Generated by javadoc (21) on Fri Aug 08 13:28:11 UTC 2025 -->
<title>AnnotatedEntityHolder (Flux Capacitor Client 0.1227.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-08-08">
<meta name="description" content="declaration: package: io.fluxcapacitor.javaclient.modeling, class: AnnotatedEntityHolder">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/AnnotatedEntityHolder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.fluxcapacitor.javaclient.modeling</a></div>
<h1 title="Class AnnotatedEntityHolder" class="title">Class AnnotatedEntityHolder</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.fluxcapacitor.javaclient.modeling.AnnotatedEntityHolder</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">AnnotatedEntityHolder</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Helper class for <a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling"><code>Entity</code></a> instances that manage nested entity relationships annotated with
 <a href="Member.html" title="annotation interface in io.fluxcapacitor.javaclient.modeling"><code>@Member</code></a>.
 <p>
 The <code>AnnotatedEntityHolder</code> provides a way to access and update a composite object (holder) that contains one
 or more nested entities. It supports collections, maps, and single-value member fields. It extracts member values
 using reflection and allows updating them through generated "wither" or "setter" logic, making it possible to
 reconstruct an updated parent entity when one of its children changes.
 <p>
 The holder is typically tied to a specific <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/reflect/AccessibleObject.html" title="class or interface in java.lang.reflect" class="external-link"><code>AccessibleObject</code></a> (field or method), which is analyzed and cached
 to optimize repeated operations.

 <h2 id="responsibilities--heading">Responsibilities:</h2>
 <ul>
   <li>Extract and cache metadata about a member location (field/method), including its type, ID property, and wither.</li>
   <li>Create <a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling"><code>ImmutableEntity</code></a> instances from nested values at this member location.</li>
   <li>Apply updates to these entities and propagate the changes back to the parent object via a wither or clone-and-set.</li>
   <li>Support updating collection and map-based member fields while preserving immutability semantics.</li>
 </ul>

 <p>
 The holder is initialized and cached via <a href="#getEntityHolder(java.lang.Class,java.lang.reflect.AccessibleObject,io.fluxcapacitor.javaclient.modeling.EntityHelper,io.fluxcapacitor.javaclient.common.serialization.Serializer)"><code>getEntityHolder(Class, AccessibleObject, EntityHelper, Serializer)</code></a>,
 and update logic falls back to serialization-based cloning if a wither method is not explicitly defined.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling"><code>ImmutableEntity</code></a></li>
<li><a href="Member.html" title="annotation interface in io.fluxcapacitor.javaclient.modeling"><code>Member</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a><wbr>&lt;? extends <a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling">ImmutableEntity</a>&lt;?&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEntities(io.fluxcapacitor.javaclient.modeling.Entity)" class="member-name-link">getEntities</a><wbr>(<a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling">Entity</a>&lt;?&gt;&nbsp;parent)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the set of <a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling"><code>ImmutableEntity</code></a> instances that are defined at the member location within the specified
 parent entity.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="AnnotatedEntityHolder.html" title="class in io.fluxcapacitor.javaclient.modeling">AnnotatedEntityHolder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getEntityHolder(java.lang.Class,java.lang.reflect.AccessibleObject,io.fluxcapacitor.javaclient.modeling.EntityHelper,io.fluxcapacitor.javaclient.common.serialization.Serializer)" class="member-name-link">getEntityHolder</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;ownerType,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/reflect/AccessibleObject.html" title="class or interface in java.lang.reflect" class="external-link">AccessibleObject</a>&nbsp;location,
 <a href="EntityHelper.html" title="interface in io.fluxcapacitor.javaclient.modeling">EntityHelper</a>&nbsp;entityHelper,
 <a href="../common/serialization/Serializer.html" title="interface in io.fluxcapacitor.javaclient.common.serialization">Serializer</a>&nbsp;serializer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Retrieves or creates a cached <code>AnnotatedEntityHolder</code> at the given member location.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateOwner(java.lang.Object,io.fluxcapacitor.javaclient.modeling.Entity,io.fluxcapacitor.javaclient.modeling.Entity)" class="member-name-link">updateOwner</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;owner,
 <a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling">Entity</a>&lt;?&gt;&nbsp;before,
 <a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling">Entity</a>&lt;?&gt;&nbsp;after)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the parent object with the new state of a child entity.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getEntityHolder(java.lang.Class,java.lang.reflect.AccessibleObject,io.fluxcapacitor.javaclient.modeling.EntityHelper,io.fluxcapacitor.javaclient.common.serialization.Serializer)">
<h3>getEntityHolder</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="AnnotatedEntityHolder.html" title="class in io.fluxcapacitor.javaclient.modeling">AnnotatedEntityHolder</a></span>&nbsp;<span class="element-name">getEntityHolder</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;ownerType,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/reflect/AccessibleObject.html" title="class or interface in java.lang.reflect" class="external-link">AccessibleObject</a>&nbsp;location,
 <a href="EntityHelper.html" title="interface in io.fluxcapacitor.javaclient.modeling">EntityHelper</a>&nbsp;entityHelper,
 <a href="../common/serialization/Serializer.html" title="interface in io.fluxcapacitor.javaclient.common.serialization">Serializer</a>&nbsp;serializer)</span></div>
<div class="block">Retrieves or creates a cached <code>AnnotatedEntityHolder</code> at the given member location.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ownerType</code> - the class that owns the annotated member</dd>
<dd><code>location</code> - the accessible field or method annotated with @Member</dd>
<dd><code>entityHelper</code> - the helper used to apply/validate/apply logic to nested entities</dd>
<dd><code>serializer</code> - the serializer used for cloning values during updates</dd>
<dt>Returns:</dt>
<dd>a cached or new instance of <code>AnnotatedEntityHolder</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEntities(io.fluxcapacitor.javaclient.modeling.Entity)">
<h3>getEntities</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html" title="class or interface in java.util.stream" class="external-link">Stream</a>&lt;? extends <a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling">ImmutableEntity</a>&lt;?&gt;&gt;</span>&nbsp;<span class="element-name">getEntities</span><wbr><span class="parameters">(<a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling">Entity</a>&lt;?&gt;&nbsp;parent)</span></div>
<div class="block">Returns the set of <a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling"><code>ImmutableEntity</code></a> instances that are defined at the member location within the specified
 parent entity. This includes actual members and an "empty" fallback entity used for creating new entities or
 assertions to carry out before an entity is created.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>parent</code> - the parent entity instance</dd>
<dt>Returns:</dt>
<dd>a stream of nested <a href="ImmutableEntity.html" title="class in io.fluxcapacitor.javaclient.modeling"><code>ImmutableEntity</code></a> instances</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateOwner(java.lang.Object,io.fluxcapacitor.javaclient.modeling.Entity,io.fluxcapacitor.javaclient.modeling.Entity)">
<h3>updateOwner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">updateOwner</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;owner,
 <a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling">Entity</a>&lt;?&gt;&nbsp;before,
 <a href="Entity.html" title="interface in io.fluxcapacitor.javaclient.modeling">Entity</a>&lt;?&gt;&nbsp;after)</span></div>
<div class="block">Updates the parent object with the new state of a child entity. Uses a wither method if available; otherwise
 attempts a reflective update through cloning and direct field access. If the entity has been removed (value has
 become <code>null</code>), the entity is removed from the owner object if possible.
 <p>
 Note that this method typically returns a new clone of the owner object containing the updated child entity
 value.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>owner</code> - the parent object containing the member field</dd>
<dd><code>before</code> - the old entity (before update)</dd>
<dd><code>after</code> - the new entity (after update)</dd>
<dt>Returns:</dt>
<dd>a new updated parent object, or the original if mutation fails</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025 <a href="https://github.com/flux-capacitor-io/flux-capacitor-client">Flux Capacitor</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
